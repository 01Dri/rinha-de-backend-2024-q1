 api1 Pulling 
 api2 Pulling 
 6a299ae9cfd9 Already exists 
 e08e8703b2fb Already exists 
 68e92d11b04e Already exists 
 5b9fe7fef9be Already exists 
 278d467c182f Pulling fs layer 
 aab6430b55a2 Pulling fs layer 
 b6f92f4f6240 Pulling fs layer 
 2e24338062e4 Pulling fs layer 
 938ab6533dbd Pulling fs layer 
 2f066d54f78e Pulling fs layer 
 5988e15e81d9 Pulling fs layer 
 e160236d101e Pulling fs layer 
 2e24338062e4 Waiting 
 938ab6533dbd Waiting 
 2f066d54f78e Waiting 
 5988e15e81d9 Waiting 
 e160236d101e Waiting 
 6a299ae9cfd9 Already exists 
 e08e8703b2fb Already exists 
 68e92d11b04e Already exists 
 5b9fe7fef9be Already exists 
 278d467c182f Pulling fs layer 
 aab6430b55a2 Pulling fs layer 
 b6f92f4f6240 Pulling fs layer 
 2e24338062e4 Pulling fs layer 
 938ab6533dbd Pulling fs layer 
 2f066d54f78e Pulling fs layer 
 5988e15e81d9 Pulling fs layer 
 e160236d101e Pulling fs layer 
 e160236d101e Waiting 
 2e24338062e4 Waiting 
 2f066d54f78e Waiting 
 938ab6533dbd Waiting 
 5988e15e81d9 Waiting 
 278d467c182f Downloading [==========>                                        ]     720B/3.371kB
 b6f92f4f6240 Downloading [>                                                  ]  22.62kB/2.234MB
 278d467c182f Downloading [==================================================>]  3.371kB/3.371kB
 278d467c182f Download complete 
 278d467c182f Downloading [==========>                                        ]     720B/3.371kB
 b6f92f4f6240 Downloading [>                                                  ]  22.62kB/2.234MB
 278d467c182f Downloading [==================================================>]  3.371kB/3.371kB
 278d467c182f Verifying Checksum 
 278d467c182f Download complete 
 278d467c182f Extracting [==================================================>]  3.371kB/3.371kB
 278d467c182f Extracting [==================================================>]  3.371kB/3.371kB
 278d467c182f Extracting [==================================================>]  3.371kB/3.371kB
 278d467c182f Extracting [==================================================>]  3.371kB/3.371kB
 aab6430b55a2 Downloading [>                                                  ]  494.8kB/49.3MB
 aab6430b55a2 Downloading [>                                                  ]  494.8kB/49.3MB
 b6f92f4f6240 Verifying Checksum 
 b6f92f4f6240 Download complete 
 b6f92f4f6240 Verifying Checksum 
 b6f92f4f6240 Download complete 
 aab6430b55a2 Downloading [=======>                                           ]  7.064MB/49.3MB
 aab6430b55a2 Downloading [=======>                                           ]  7.064MB/49.3MB
 278d467c182f Pull complete 
 278d467c182f Pull complete 
 aab6430b55a2 Downloading [=============>                                     ]   13.6MB/49.3MB
 aab6430b55a2 Downloading [=============>                                     ]   13.6MB/49.3MB
 aab6430b55a2 Downloading [=======================>                           ]  23.16MB/49.3MB
 aab6430b55a2 Downloading [=======================>                           ]  23.16MB/49.3MB
 aab6430b55a2 Downloading [================================>                  ]  32.21MB/49.3MB
 aab6430b55a2 Downloading [================================>                  ]  32.21MB/49.3MB
 aab6430b55a2 Downloading [========================================>          ]  39.79MB/49.3MB
 aab6430b55a2 Downloading [========================================>          ]  39.79MB/49.3MB
 2e24338062e4 Downloading [==================================================>]     451B/451B
 2e24338062e4 Verifying Checksum 
 2e24338062e4 Download complete 
 2e24338062e4 Downloading [==================================================>]     451B/451B
 2e24338062e4 Verifying Checksum 
 2e24338062e4 Download complete 
 aab6430b55a2 Verifying Checksum 
 aab6430b55a2 Verifying Checksum 
 aab6430b55a2 Download complete 
 aab6430b55a2 Download complete 
 aab6430b55a2 Extracting [>                                                  ]  524.3kB/49.3MB
 aab6430b55a2 Extracting [>                                                  ]  524.3kB/49.3MB
 938ab6533dbd Downloading [==================================================>]     133B/133B
 938ab6533dbd Verifying Checksum 
 938ab6533dbd Download complete 
 938ab6533dbd Verifying Checksum 
 938ab6533dbd Download complete 
 aab6430b55a2 Extracting [======>                                            ]  6.291MB/49.3MB
 aab6430b55a2 Extracting [======>                                            ]  6.291MB/49.3MB
 aab6430b55a2 Extracting [=============>                                     ]  13.11MB/49.3MB
 aab6430b55a2 Extracting [=============>                                     ]  13.11MB/49.3MB
 aab6430b55a2 Extracting [==================>                                ]  17.83MB/49.3MB
 aab6430b55a2 Extracting [==================>                                ]  17.83MB/49.3MB
 aab6430b55a2 Extracting [========================>                          ]  24.64MB/49.3MB
 aab6430b55a2 Extracting [========================>                          ]  24.64MB/49.3MB
 aab6430b55a2 Extracting [===============================>                   ]  31.46MB/49.3MB
 aab6430b55a2 Extracting [===============================>                   ]  31.46MB/49.3MB
 5988e15e81d9 Downloading [>                                                  ]  27.38kB/2.715MB
 5988e15e81d9 Downloading [>                                                  ]  27.38kB/2.715MB
 aab6430b55a2 Extracting [=====================================>             ]   36.7MB/49.3MB
 aab6430b55a2 Extracting [=====================================>             ]   36.7MB/49.3MB
 5988e15e81d9 Downloading [========>                                          ]  439.2kB/2.715MB
 5988e15e81d9 Downloading [========>                                          ]  439.2kB/2.715MB
 2f066d54f78e Downloading [==================================================>]     252B/252B
 2f066d54f78e Verifying Checksum 
 2f066d54f78e Download complete 
 2f066d54f78e Downloading [==================================================>]     252B/252B
 2f066d54f78e Verifying Checksum 
 2f066d54f78e Download complete 
 5988e15e81d9 Downloading [================>                                  ]  914.3kB/2.715MB
 5988e15e81d9 Downloading [================>                                  ]  914.3kB/2.715MB
 aab6430b55a2 Extracting [======================================>            ]  38.27MB/49.3MB
 aab6430b55a2 Extracting [======================================>            ]  38.27MB/49.3MB
 5988e15e81d9 Downloading [====================================>              ]  1.963MB/2.715MB
 5988e15e81d9 Downloading [====================================>              ]  1.963MB/2.715MB
 e160236d101e Downloading [====================>                              ]     733B/1.813kB
 e160236d101e Verifying Checksum 
 e160236d101e Download complete 
 e160236d101e Downloading [====================>                              ]     733B/1.813kB
 e160236d101e Downloading [==================================================>]  1.813kB/1.813kB
 e160236d101e Verifying Checksum 
 e160236d101e Download complete 
 aab6430b55a2 Extracting [=======================================>           ]  39.32MB/49.3MB
 aab6430b55a2 Extracting [=======================================>           ]  39.32MB/49.3MB
 5988e15e81d9 Downloading [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Downloading [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Verifying Checksum 
 5988e15e81d9 Verifying Checksum 
 5988e15e81d9 Download complete 
 5988e15e81d9 Download complete 
 aab6430b55a2 Extracting [========================================>          ]  40.37MB/49.3MB
 aab6430b55a2 Extracting [========================================>          ]  40.37MB/49.3MB
 aab6430b55a2 Extracting [==========================================>        ]  41.94MB/49.3MB
 aab6430b55a2 Extracting [==========================================>        ]  41.94MB/49.3MB
 aab6430b55a2 Extracting [===========================================>       ]  42.99MB/49.3MB
 aab6430b55a2 Extracting [===========================================>       ]  42.99MB/49.3MB
 aab6430b55a2 Extracting [============================================>      ]  44.04MB/49.3MB
 aab6430b55a2 Extracting [============================================>      ]  44.04MB/49.3MB
 aab6430b55a2 Extracting [==============================================>    ]  45.61MB/49.3MB
 aab6430b55a2 Extracting [==============================================>    ]  45.61MB/49.3MB
 aab6430b55a2 Extracting [===============================================>   ]  46.66MB/49.3MB
 aab6430b55a2 Extracting [===============================================>   ]  46.66MB/49.3MB
 aab6430b55a2 Extracting [================================================>  ]  47.71MB/49.3MB
 aab6430b55a2 Extracting [================================================>  ]  47.71MB/49.3MB
 aab6430b55a2 Extracting [================================================>  ]  48.23MB/49.3MB
 aab6430b55a2 Extracting [================================================>  ]  48.23MB/49.3MB
 aab6430b55a2 Extracting [=================================================> ]  49.28MB/49.3MB
 aab6430b55a2 Extracting [=================================================> ]  49.28MB/49.3MB
 aab6430b55a2 Extracting [==================================================>]   49.3MB/49.3MB
 aab6430b55a2 Extracting [==================================================>]   49.3MB/49.3MB
 aab6430b55a2 Pull complete 
 aab6430b55a2 Pull complete 
 b6f92f4f6240 Extracting [>                                                  ]  32.77kB/2.234MB
 b6f92f4f6240 Extracting [>                                                  ]  32.77kB/2.234MB
 b6f92f4f6240 Extracting [==================================================>]  2.234MB/2.234MB
 b6f92f4f6240 Extracting [==================================================>]  2.234MB/2.234MB
 b6f92f4f6240 Pull complete 
 b6f92f4f6240 Pull complete 
 2e24338062e4 Extracting [==================================================>]     451B/451B
 2e24338062e4 Extracting [==================================================>]     451B/451B
 2e24338062e4 Extracting [==================================================>]     451B/451B
 2e24338062e4 Extracting [==================================================>]     451B/451B
 2e24338062e4 Pull complete 
 2e24338062e4 Pull complete 
 938ab6533dbd Extracting [==================================================>]     133B/133B
 938ab6533dbd Extracting [==================================================>]     133B/133B
 938ab6533dbd Extracting [==================================================>]     133B/133B
 938ab6533dbd Extracting [==================================================>]     133B/133B
 938ab6533dbd Pull complete 
 938ab6533dbd Pull complete 
 2f066d54f78e Extracting [==================================================>]     252B/252B
 2f066d54f78e Extracting [==================================================>]     252B/252B
 2f066d54f78e Extracting [==================================================>]     252B/252B
 2f066d54f78e Extracting [==================================================>]     252B/252B
 2f066d54f78e Pull complete 
 2f066d54f78e Pull complete 
 5988e15e81d9 Extracting [>                                                  ]  32.77kB/2.715MB
 5988e15e81d9 Extracting [>                                                  ]  32.77kB/2.715MB
 5988e15e81d9 Extracting [======================>                            ]  1.212MB/2.715MB
 5988e15e81d9 Extracting [======================>                            ]  1.212MB/2.715MB
 5988e15e81d9 Extracting [======================================>            ]  2.097MB/2.715MB
 5988e15e81d9 Extracting [======================================>            ]  2.097MB/2.715MB
 5988e15e81d9 Extracting [===============================================>   ]  2.556MB/2.715MB
 5988e15e81d9 Extracting [===============================================>   ]  2.556MB/2.715MB
 5988e15e81d9 Extracting [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Extracting [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Extracting [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Extracting [==================================================>]  2.715MB/2.715MB
 5988e15e81d9 Pull complete 
 5988e15e81d9 Pull complete 
 e160236d101e Extracting [==================================================>]  1.813kB/1.813kB
 e160236d101e Extracting [==================================================>]  1.813kB/1.813kB
 e160236d101e Extracting [==================================================>]  1.813kB/1.813kB
 e160236d101e Extracting [==================================================>]  1.813kB/1.813kB
 e160236d101e Pull complete 
 e160236d101e Pull complete 
 api1 Pulled 
 api2 Pulled 
 Network eu_fountai_default  Creating
 Network eu_fountai_default  Created
 Container eu_fountai-db-1  Creating
 Container eu_fountai-db-1  Created
 Container eu_fountai-api1-1  Creating
 Container eu_fountai-api2-1  Creating
 Container eu_fountai-api2-1  Created
 Container eu_fountai-api1-1  Created
 Container nginx  Creating
 Container nginx  Created
Attaching to api1-1, api2-1, db-1, nginx
db-1    | The files belonging to this database system will be owned by user "postgres".
db-1    | This user must also own the server process.
db-1    | 
db-1    | The database cluster will be initialized with locale "en_US.utf8".
db-1    | The default database encoding has accordingly been set to "UTF8".
db-1    | The default text search configuration will be set to "english".
db-1    | 
db-1    | Data page checksums are disabled.
db-1    | 
db-1    | fixing permissions on existing directory /var/lib/postgresql/data ... ok
db-1    | creating subdirectories ... ok
db-1    | selecting dynamic shared memory implementation ... posix
db-1    | selecting default max_connections ... 100
db-1    | selecting default shared_buffers ... 128MB
db-1    | selecting default time zone ... Etc/UTC
db-1    | creating configuration files ... ok
api1-1  | Master 1 is running
api2-1  | Master 1 is running
db-1    | running bootstrap script ... ok
nginx   | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx   | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx   | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx   | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx   | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx   | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx   | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx   | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx   | /docker-entrypoint.sh: Configuration complete; ready for start up
api2-1  | Worker 15 started
api1-1  | Worker 16 started
api1-1  | Worker 15 started
api1-1  | Worker 17 started
api2-1  | Worker 16 started
api2-1  | Worker 14 started
api2-1  | Worker 19 started
api1-1  | Worker 19 started
nginx   | 2024/02/07 22:13:56 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:13:56 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
db-1    | performing post-bootstrap initialization ... ok
api2-1  | Servidor rodando na porta 3000
db-1    | syncing data to disk ... ok
db-1    | 
db-1    | 
db-1    | Success. You can now start the database server using:
db-1    | 
db-1    |     pg_ctl -D /var/lib/postgresql/data -l logfile start
db-1    | 
db-1    | initdb: warning: enabling "trust" authentication for local connections
db-1    | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
db-1    | waiting for server to start....2024-02-07 22:13:57.719 UTC [48] LOG:  starting PostgreSQL 16.1 (Debian 16.1-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
db-1    | 2024-02-07 22:13:57.724 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
api2-1  | Servidor rodando na porta 3000
db-1    | 2024-02-07 22:13:57.734 UTC [51] LOG:  database system was shut down at 2024-02-07 22:13:56 UTC
db-1    | 2024-02-07 22:13:57.741 UTC [48] LOG:  database system is ready to accept connections
db-1    |  done
db-1    | server started
api1-1  | Servidor rodando na porta 3000
api1-1  | Servidor rodando na porta 3000
api1-1  | Servidor rodando na porta 3000
api2-1  | Servidor rodando na porta 3000
api2-1  | Servidor rodando na porta 3000
api1-1  | Servidor rodando na porta 3000
db-1    | CREATE DATABASE
db-1    | 
db-1    | 
db-1    | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
db-1    | psql:/docker-entrypoint-initdb.d/init.sql: error: could not read from input file: Is a directory
api1-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api1-1  |     Error.captureStackTrace(err);
api1-1  |           ^
api1-1  | 
api1-1  | Error: getaddrinfo EAI_AGAIN db
api1-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api1-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api1-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api1-1  |   errno: -3001,
api1-1  |   code: 'EAI_AGAIN',
api1-1  |   syscall: 'getaddrinfo',
api1-1  |   hostname: 'db'
api1-1  | }
api1-1  | 
api1-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:13:58 [error] 30#30: *4 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
api1-1  | Worker 16 died
api2-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api2-1  |     Error.captureStackTrace(err);
api2-1  |           ^
api2-1  | 
api2-1  | Error: getaddrinfo EAI_AGAIN db
api2-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api2-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api2-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api2-1  |   errno: -3001,
api2-1  |   code: 'EAI_AGAIN',
api2-1  |   syscall: 'getaddrinfo',
api2-1  |   hostname: 'db'
api2-1  | }
api2-1  | 
api2-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:13:58 [error] 30#30: *4 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
api2-1  | Worker 15 died
db-1 exited with code 1
api1-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api1-1  |     Error.captureStackTrace(err);
api1-1  |           ^
api1-1  | 
api1-1  | Error: getaddrinfo EAI_AGAIN db
api1-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api1-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api1-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api1-1  |   errno: -3001,
api1-1  |   code: 'EAI_AGAIN',
api1-1  |   syscall: 'getaddrinfo',
api1-1  |   hostname: 'db'
api1-1  | }
api1-1  | 
api1-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:00 [error] 31#31: *7 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
api1-1  | Worker 17 died
api2-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api2-1  |     Error.captureStackTrace(err);
api2-1  |           ^
api2-1  | 
api2-1  | Error: getaddrinfo EAI_AGAIN db
api2-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api2-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api2-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api2-1  |   errno: -3001,
api2-1  |   code: 'EAI_AGAIN',
api2-1  |   syscall: 'getaddrinfo',
api2-1  |   hostname: 'db'
api2-1  | }
api2-1  | 
api2-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:00 [error] 31#31: *7 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
api2-1  | Worker 16 died
api1-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api1-1  |     Error.captureStackTrace(err);
api1-1  |           ^
api1-1  | 
api1-1  | Error: getaddrinfo EAI_AGAIN db
api1-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api1-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api1-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api1-1  |   errno: -3001,
api1-1  |   code: 'EAI_AGAIN',
api1-1  |   syscall: 'getaddrinfo',
api1-1  |   hostname: 'db'
api1-1  | }
api1-1  | 
api1-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:02 [error] 32#32: *10 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
api1-1  | Worker 15 died
api2-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api2-1  |     Error.captureStackTrace(err);
api2-1  |           ^
api2-1  | 
api2-1  | Error: getaddrinfo EAI_AGAIN db
api2-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api2-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api2-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api2-1  |   errno: -3001,
api2-1  |   code: 'EAI_AGAIN',
api2-1  |   syscall: 'getaddrinfo',
api2-1  |   hostname: 'db'
api2-1  | }
api2-1  | 
api2-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:02 [error] 32#32: *10 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
api2-1  | Worker 14 died
nginx   | 2024/02/07 22:14:04 [error] 29#29: *13 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:06 [error] 29#29: *14 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
api2-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api2-1  |     Error.captureStackTrace(err);
api2-1  |           ^
api2-1  | 
api2-1  | Error: getaddrinfo EAI_AGAIN db
api2-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api2-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api2-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api2-1  |   errno: -3001,
api2-1  |   code: 'EAI_AGAIN',
api2-1  |   syscall: 'getaddrinfo',
api2-1  |   hostname: 'db'
api2-1  | }
api2-1  | 
api2-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:08 [error] 29#29: *15 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
api2-1  | Worker 19 died
api1-1  | /usr/src/app/node_modules/pg-pool/index.js:45
api1-1  |     Error.captureStackTrace(err);
api1-1  |           ^
api1-1  | 
api1-1  | Error: getaddrinfo EAI_AGAIN db
api1-1  |     at /usr/src/app/node_modules/pg-pool/index.js:45:11
api1-1  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
api1-1  |     at async handleGetClientes (/usr/src/app/index.js:88:18) {
api1-1  |   errno: -3001,
api1-1  |   code: 'EAI_AGAIN',
api1-1  |   syscall: 'getaddrinfo',
api1-1  |   hostname: 'db'
api1-1  | }
api1-1  | 
api1-1  | Node.js v21.6.1
nginx   | 2024/02/07 22:14:08 [error] 29#29: *15 upstream prematurely closed connection while reading response header from upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
api1-1  | Worker 19 died
api2-1 exited with code 0
api1-1 exited with code 0
nginx   | 2024/02/07 22:14:10 [error] 29#29: *18 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:12 [error] 29#29: *19 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:14 [error] 29#29: *20 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:16 [error] 29#29: *21 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:18 [error] 29#29: *22 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:14:55 [error] 29#29: *23 connect() failed (113: No route to host) while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:15:13 [error] 29#29: *23 connect() failed (113: No route to host) while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.4:3000/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:15:18 [error] 29#29: *26 connect() failed (113: No route to host) while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://172.18.0.3:3000/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:15:18 [error] 29#29: *26 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:15:20 [error] 29#29: *28 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx   | 2024/02/07 22:15:22 [error] 29#29: *29 no live upstreams while connecting to upstream, client: 172.18.0.1, server: , request: "GET /clientes/1/extrato HTTP/1.1", upstream: "http://api/clientes/1/extrato", host: "localhost:9999"
nginx exited with code 0
